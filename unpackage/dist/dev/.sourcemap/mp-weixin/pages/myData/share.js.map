{"version":3,"sources":["uni-app:///main.js","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?6641","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?93e8","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?4dd1","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?9a1b","uni-app:///pages/myData/share.vue","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?1c76","webpack:///F:/项目总文件夹/intellect-uniapp/pages/myData/share.vue?ab82"],"names":["createPage","Page"],"mappings":"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","file":"pages/myData/share.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/myData/share.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./share.vue?vue&type=template&id=6d2f81ff&\"\nvar renderjs\nimport script from \"./share.vue?vue&type=script&lang=js&\"\nexport * from \"./share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./share.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/myData/share.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./share.vue?vue&type=template&id=6d2f81ff&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./share.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view>\r\n\t\t\t<canvas canvas-id=\"mini_poster\" :style=\"{ width: canvasW + 'px', height: bgH + 'px' }\"></canvas>\r\n\t\t</view>\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view style=\"height: 106rpx; align-items: center;\">\r\n\t\t\t\t<button style=\"background: transparent; height: 106rpx; line-height: 106rpx;color: #FFFFFF;\" @click=\"toSaveImage\">保存海报并分享</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmpWxQr: \"https://img1.baidu.com/it/u=1078861629,3747050294&fm=26&fmt=auto&gp=0.jpg\",\r\n\t\t\t\tcanvasW: 0,\r\n\t\t\t\tcanvasH: 0,\r\n\t\t\t\tbgH:0,\r\n\t\t\t\tinvest_areas: [{id: 1, name: \"儿童教育\"}, {id: 1, name: \"少儿编程\"}, {id: 1, name: \"生物智能\"}, {id: 1, name: \"万物相连\"}, {id: 1, name: \"大数据\"}],\r\n\t\t\t\tnickname: \"热豆Wakary\",\r\n\t\t\t\tavatar: \"https://img0.baidu.com/it/u=2980445260,41238050&fm=26&fmt=auto&gp=0.jpg\",\r\n\t\t\t\tcompany: \"热豆科技\",\r\n\t\t\t\tphone: \"17610998099\",\r\n\t\t\t\temail: \"redoume@163.com\",\r\n\t\t\t\tlocation: \"北京\",\r\n\t\t\t\tfinished: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tshowInvestAreas() {\r\n\t\t\t\tif (this.invest_areas) {\r\n\t\t\t\t\tconst names = []\r\n\t\t\t\t\tthis.invest_areas.forEach(item => {\r\n\t\t\t\t\t\tnames.push(item.name)\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn names.join(\" \")\r\n\t\t\t\t}\r\n\t\t\t\treturn '未设置'\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.canvasW = uni.getSystemInfoSync().windowWidth\r\n\t\t\tthis.canvasH = this.calculateCanvasHeight()\r\n\t\t\tthis.bgH = uni.getSystemInfoSync().windowHeight\r\n\t\t\tconsole.log(this.bgH)\r\n\t\t\tthis.toDrawCanvas()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoSaveImage() {\r\n\t\t\t\tif (!this.finished) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '正在生成图片，稍后再试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'mini_poster',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res.tempFilePath)\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\tif (err.errMsg === \"saveImageToPhotosAlbum:fail:auth denied\" || err.errMsg === \"saveImageToPhotosAlbum:fail auth deny\") {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t    title: '提示',\r\n\t\t\t\t\t\t\t\t\t    content: '需要您授权才能保存到相册',\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t            uni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(settingdata) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (settingdata.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  uni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '获取权限成功,再次点击按钮即可保存',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  uni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '获取权限失败，将无法保存到相册哦~',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t        } \r\n\t\t\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '保存海报失败'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync toDrawCanvas() {\r\n\t\t\t\tconst padding = uni.upx2px(50)\r\n\t\t\t\tconst cardHeight = uni.upx2px(380)\r\n\t\t\t\tconst cw = this.canvasW - 2 * padding\r\n\r\n\t\t\t\tlet ctx = uni.createCanvasContext('mini_poster', this)\r\n\r\n\t\t\t\t// 透明背景\r\n\t\t\t\tctx.setFillStyle('#ffffff')\r\n\t\t\t\tctx.fillRect(0, 0, this.canvasW, this.bgH) //绘制海报可视范围\r\n\t\t\t\tctx.drawImage('../../static/img/icons/bg.jpg', 0, 0, this.canvasW, this.bgH)\r\n\t\t\t\t// draw card round rect\r\n\t\t\t\tconst r = uni.upx2px(12)\r\n\t\t\t\t// this.drawRoundRect(ctx, padding, padding, cw, cardHeight, r, 2)\r\n\t\t\t\t// draw card content\r\n\t\t\t\t// this.drawCard(ctx, padding, padding, cw, cardHeight)\r\n\t\t\t\t// draw avatar\r\n\t\t\t\tconst av = uni.upx2px(128)\r\n\t\t\t\tconst hi = await this.downloadImage(this.avatar)\r\n\t\t\t\tif (hi.tempFilePath) {\r\n\t\t\t\t\tconst x = this.canvasW - padding - uni.upx2px(40) - av\r\n\t\t\t\t\tconst y = padding + uni.upx2px(40)\r\n\t\t\t\t\t// this.drawRoundRectAvatar(ctx, x, y, av, av, r, hi.tempFilePath)\r\n\t\t\t\t}\r\n\t\t\t\t// draw hello info\r\n\t\t\t\tthis.drawHelloInfo(ctx, padding, padding + cardHeight + padding, cw)\r\n\t\t\t\t// draw qr code\r\n\t\t\t\tif (this.mpWxQr) {\r\n\t\t\t\t\tconst hello = await this.downloadImage(this.mpWxQr)\r\n\t\t\t\t\tconst padding = uni.upx2px(34)\r\n\t\t\t\t\tconst av = uni.upx2px(200)\r\n\t\t\t\t\tconst totalH = this.calculateCanvasHeight()\r\n\t\t\t\t\tif (hello.tempFilePath) {\r\n\t\t\t\t\t\tctx.drawImage(hello.tempFilePath, this.canvasW - padding - av, totalH - padding - av, av, av)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.draw(false, (() => {}))\r\n\t\t\t\tthis.finished = true\r\n\t\t\t},\r\n\t\t\tasync drawCard(ctx, x, y, w, h) {\r\n\t\t\t\t// draw company\r\n\t\t\t\tlet vp = y + uni.upx2px(45)\r\n\t\t\t\tconst hp = x + uni.upx2px(52)\r\n\t\t\t\tctx.setTextBaseline('top')\r\n\t\t\t\tconst fz30 = uni.upx2px(30)\r\n\t\t\t\tctx.fillStyle = '#2E3B67'\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.company, hp, vp)\r\n\r\n\t\t\t\t// draw nickname\r\n\t\t\t\tvp = vp + 30\r\n\t\t\t\tconst fz50 = uni.upx2px(50)\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz50)\r\n\t\t\t\tctx.fillText(this.nickname, hp, vp)\r\n\r\n\t\t\t\tvp = vp + 42\r\n\t\t\t\tconst iconW = uni.upx2px(30)\r\n\t\t\t\tconst textH = hp + iconW + 6\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.location, textH, vp)\r\n\r\n\t\t\t\tvp = vp + 28\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\t// ctx.fillText(this.showInvestAreas, textH, vp)\r\n\t\t\t\tconst oPadding = uni.upx2px(34)\r\n\t\t\t\tconst iPadding = uni.upx2px(40)\r\n\t\t\t\tconst textW = w - textH + oPadding - iPadding\r\n\t\t\t\tthis.drawTextInOneLine(ctx, this.showInvestAreas, textH, vp, textW)\r\n\r\n\t\t\t\tvp = vp + 28\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/img/icons/edit.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.phone ? this.phone : '', textH, vp)\r\n\t\t\t},\r\n\t\t\tasync drawHelloInfo(ctx, x, y, w) {\r\n\t\t\t\tlet vp = y + 12\r\n\t\t\t\tconst hp = x\r\n\t\t\t\tctx.setTextBaseline('top')\r\n\t\t\t\tconst fz30 = uni.upx2px(35)\r\n\t\t\t\tctx.setFillStyle('#f0ad4e')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\t// ctx.fillText('您好，', hp, vp)\r\n\t\t\t\t// const text = \"我是来自 \" + this.company + ' 的投资人' + this.nickname\r\n\t\t\t\tconst text = \"邀请与被邀请双方\"\r\n\t\t\t\tconst lines = this.drawTextInLines(ctx, text, hp, vp, w, 26)\r\n\t\t\t\tvp += 26 * lines + 30\r\n\t\t\t\tctx.fillText('各获得一张3点能量券', hp, vp)\r\n\t\t\t\t// vp += 26\r\n\t\t\t\t// ctx.fillText('谢谢', hp, vp)\r\n\r\n\t\t\t\tvp += 26\r\n\t\t\t\tvp += 40\r\n\t\t\t\tctx.setFillStyle('#fff')\r\n\t\t\t\tctx.fillRect(hp, vp, 30, 3)\r\n\t\t\t\tvp += 10\r\n\t\t\t\tctx.setFillStyle('#fff')\r\n\t\t\t\tconst fz28 = uni.upx2px(28)\r\n\t\t\t\tctx.setFontSize(fz28)\r\n\t\t\t\tctx.fillText('长按识别二维码', hp, vp)\r\n\t\t\t\tvp += 20\r\n\t\t\t\tconst ttt = '邀请兑奖码：JIODSJFISF'\r\n\t\t\t\tctx.fillText(ttt, hp, vp)\r\n\t\t\t},\r\n\t\t\tcalculateCanvasHeight() {\r\n\t\t\t\t// 400 is card height\r\n\t\t\t\tconst ctx = uni.createCanvasContext('test_poster')\r\n\t\t\t\tconst padding = uni.upx2px(34)\r\n\t\t\t\tconst text = \"我是来自 \" + this.company + ' 的投资人' + this.nickname\r\n\t\t\t\tconst rows = this.drawTextInLines(ctx, text, padding, 0, this.canvasW - 2 * padding, 26)\r\n\t\t\t\tconst cardH = uni.upx2px(380)\r\n\t\t\t\tconst h = padding * 2 + cardH + padding + 12 + 26 * 3 + rows * 26\r\n\t\t\t\treturn h + 90\r\n\t\t\t},\r\n\t\t\t_drawRoundRect(ctx, x, y, w, h, r) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\t// 左上角\r\n\t\t\t\tctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5)\r\n\t\t\t\t// 右上角\r\n\t\t\t\tctx.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2)\r\n\t\t\t\t// 右下角\r\n\t\t\t\tctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5)\r\n\t\t\t\t// 左下角\r\n\t\t\t\tctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\t// ctx.strokeStyle = '#D8D8D8';\r\n\t\t\t\tctx.fillStyle = '#FFFFFF';\r\n\t\t\t\t// ctx.stroke()\r\n\t\t\t\tctx.fill()\r\n\t\t\t},\r\n\t\t\tdrawRoundRect(ctx, x, y, w, h, r, lineWidth) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tthis._drawRoundRect(ctx, x, y, w, h, r)\r\n\t\t\t\tctx.clip()\r\n\t\t\t\t// draw left border\r\n\t\t\t\tctx.fillStyle = this.company ? '#2E3B67' : '#333333'\r\n\t\t\t\tconst bWidth = uni.upx2px(12)\r\n\t\t\t\tctx.fillRect(x, y, bWidth, h)\r\n\t\t\t\tctx.restore()\r\n\t\t\t},\r\n\t\t\tdrawRoundRectAvatar(ctx, x, y, w, h, r, imgPath) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tthis._drawRoundRect(ctx, x, y, w, h, r)\r\n\t\t\t\tctx.clip()\r\n\t\t\t\tctx.drawImage(imgPath, x, y, w, h)\r\n\t\t\t\tctx.restore()\r\n\t\t\t},\r\n\t\t\t// TODO: measureText not works in App\r\n\t\t\tdrawTextInLines(ctx, t, x, y, w, lineHeight) {\r\n\t\t\t\tconst chr = t.split(\"\")\r\n\t\t\t\tlet temp = ''\r\n\t\t\t\tlet row = []\r\n\t\t\t\tfor (let i = 0; i < chr.length; i++) {\r\n\t\t\t\t\tif (ctx.measureText(temp).width < w) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.push(temp)\r\n\t\t\t\t\t\ttemp = ''\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttemp += chr[i]\r\n\t\t\t\t}\r\n\t\t\t\trow.push(temp)\r\n\t\t\t\tfor (const i in row) {\r\n\t\t\t\t\t// i + 1 will be 11, 21,...\r\n\t\t\t\t\tctx.fillText(row[i], x, (y + (i * 1 + 1) * lineHeight))\r\n\t\t\t\t}\r\n\t\t\t\treturn row.length\r\n\t\t\t},\r\n\t\t\t// TODO: measureText not works in app\r\n\t\t\tdrawTextInOneLine(ctx, t, x, y, w) {\r\n\t\t\t\tconst chr = t.split('')\r\n\t\t\t\tlet temp = ''\r\n\t\t\t\tfor (let i = 0; i < chr.length; i++) {\r\n\t\t\t\t\tif (ctx.measureText(temp + '...').width <= w) {\r\n\t\t\t\t\t\ttemp += chr[i]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttemp = temp.substring(0, temp.length - 1)\r\n\t\t\t\t\t\ttemp += '...'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.fillText(temp, x, y)\r\n\t\t\t},\r\n\t\t\tdownloadImage(url) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\treturn resolve(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\treturn reject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.footer {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tbox-shadow: none;\r\n\t\tbackground-color: $uni-color-warning;\r\n\t\topacity: 0.9;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style>\r\n","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./share.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Downloads\\\\HBuilderX.3.2.9.20210927\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./share.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1634008520166\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.2.9.20210927/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}